

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Logging / Debugging &mdash; Sensirion SHDLC Python Driver 0.1.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/banner.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" />
    <link rel="prev" title="Executing Custom Commands" href="custom_commands.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Sensirion SHDLC Python Driver
          

          
          </a>

          
            
            
              <div class="version">
                0.1.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="shdlc.html">SHDLC Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_commands.html">Executing Custom Commands</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Logging / Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#log-raw-transmitted-received-data">Log Raw Transmitted/Received Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#change-logging-verbosity-of-modules">Change Logging Verbosity of Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Sensirion SHDLC Python Driver</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Logging / Debugging</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/logging_debugging.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="logging-debugging">
<h1>Logging / Debugging<a class="headerlink" href="#logging-debugging" title="Permalink to this headline">¶</a></h1>
<p>Every module of this package uses the <a class="reference external" href="https://docs.python.org/3/library/logging.html">Python Logging Facility</a> to log debug
messages, warnings etc. This page gives a quick overview how it works.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>To enable the logging facility in your project, just add the following lines
to the top of your main Python script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="log-raw-transmitted-received-data">
<h2>Log Raw Transmitted/Received Data<a class="headerlink" href="#log-raw-transmitted-received-data" title="Permalink to this headline">¶</a></h2>
<p>When debugging issues on a lower layer, it might be useful to see what data
(raw bytes) is actually sent to the underlying port, and what data is received
from the connected device. This data can be shown by changing the logging
level to <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sensirion_shdlc_driver</span> <span class="kn">import</span> <span class="n">ShdlcSerialPort</span><span class="p">,</span> <span class="n">ShdlcConnection</span><span class="p">,</span> <span class="n">ShdlcDevice</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>  <span class="c1"># &lt;- logging level set here</span>

<span class="k">with</span> <span class="n">ShdlcSerialPort</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="s1">&#39;COM1&#39;</span><span class="p">,</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">115200</span><span class="p">)</span> <span class="k">as</span> <span class="n">port</span><span class="p">:</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">ShdlcDevice</span><span class="p">(</span><span class="n">ShdlcConnection</span><span class="p">(</span><span class="n">port</span><span class="p">),</span> <span class="n">slave_address</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Version: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get_version</span><span class="p">()))</span>
</pre></div>
</div>
<p>This way the raw data is printed to the console:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">DEBUG:sensirion_shdlc_driver.port:Open ShdlcSerialPort on &#39;COM1&#39; with 115200 bit/s.</span>
<span class="go">DEBUG:sensirion_shdlc_driver.connection:Opened ShdlcConnection on &#39;COM1@115200&#39;.</span>
<span class="go">DEBUG:sensirion_shdlc_driver.port:ShdlcSerialPort send raw: [0x7E, 0x00, 0xD1, 0x00, 0x2E, 0x7E]</span>
<span class="go">DEBUG:sensirion_shdlc_driver.port:ShdlcSerialPort received raw: [0x7E, 0x00, 0xD1, 0x00, 0x07, 0x05, 0x08, 0x00, 0x03, 0x00, 0x01, 0x00, 0x16, 0x7E]</span>
<span class="go">Version: Firmware 5.8, Hardware 3.0, Protocol 1.0</span>
</pre></div>
</div>
</div>
<div class="section" id="change-logging-verbosity-of-modules">
<h2>Change Logging Verbosity of Modules<a class="headerlink" href="#change-logging-verbosity-of-modules" title="Permalink to this headline">¶</a></h2>
<p>Since every module contains its own logging object <code class="docutils literal notranslate"><span class="pre">log</span></code>, it’s even possible
to set the logging level of each module independently. For example, the
verbosity of the <a class="reference internal" href="api.html#sensirion_shdlc_driver.port.ShdlcPort" title="sensirion_shdlc_driver.port.ShdlcPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShdlcPort</span></code></a> classes
could be reduced by changing their logging level to <code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code> (i.e. only
critical messages will be logged):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sensirion_shdlc_driver</span>
<span class="kn">from</span> <span class="nn">sensirion_shdlc_driver</span> <span class="kn">import</span> <span class="n">ShdlcSerialPort</span><span class="p">,</span> <span class="n">ShdlcConnection</span><span class="p">,</span> <span class="n">ShdlcDevice</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="c1"># Make port less verbose</span>
<span class="n">sensirion_shdlc_driver</span><span class="o">.</span><span class="n">port</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">)</span>

<span class="k">with</span> <span class="n">ShdlcSerialPort</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="s1">&#39;COM1&#39;</span><span class="p">,</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">115200</span><span class="p">)</span> <span class="k">as</span> <span class="n">port</span><span class="p">:</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">ShdlcDevice</span><span class="p">(</span><span class="n">ShdlcConnection</span><span class="p">(</span><span class="n">port</span><span class="p">),</span> <span class="n">slave_address</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Version: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get_version</span><span class="p">()))</span>
</pre></div>
</div>
<p>This way you won’t see the raw transmitted data:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">DEBUG:sensirion_shdlc_driver.connection:Opened ShdlcConnection on &#39;COM1@115200&#39;.</span>
<span class="go">Version: Firmware 5.8, Hardware 3.0, Protocol 1.0</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="custom_commands.html" class="btn btn-neutral float-left" title="Executing Custom Commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 Sensirion AG, Switzerland

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: 0.1.5
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../0.1.0/index.html">0.1.0</a></dd>
            <dd><a href="../0.1.1/index.html">0.1.1</a></dd>
            <dd><a href="../0.1.2/index.html">0.1.2</a></dd>
            <dd><a href="../0.1.3/logging_debugging.html">0.1.3</a></dd>
            <dd><a href="../0.1.4/logging_debugging.html">0.1.4</a></dd>
            <dd><a href="logging_debugging.html">0.1.5</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../master/logging_debugging.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>